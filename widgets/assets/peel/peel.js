!function(t){var e,i,n,o,r,s,a=["webkit","moz",""],h=document.documentElement,p=h.style;function c(t){for(var e,i,n=0;n<a.length;n++)if((i=(e=a[n])?e+d(t):t)in p)return i}function u(t){return Math.round(100*t)/100}function l(t){return Math.max(0,Math.min(1,t))}function f(t,e,i){return(t-e)/(i-e)}function d(t){return t.slice(0,1).toUpperCase()+t.slice(1)}function g(t){return"peel-"+t}function y(t,e){t.style[n]=e}function w(t,e,i,n,o){return u(t)+"px "+u(e)+"px "+u(i)+"px "+(n?u(n)+"px ":"")+"rgba(0,0,0,"+u(o)+")"}function b(t,e){t.style.opacity=e}function S(t,e,i){var n;s&&(n=0===i.length?"none":"linear-gradient("+u(e)+"deg,"+i.join(",")+")",t.style.backgroundImage=n)}function v(t,e,i){t.addEventListener(e,i)}function O(t,e,i){t.removeEventListener(e,i)}function P(t,e){var i=t.changedTouches?t.changedTouches[0]:t;return{x:i.clientX-e.offsetLeft+window.scrollX,y:i.clientY-e.offsetTop+window.scrollY}}function $(t,e,i,n){return function(o){t.call(e,o,i,n)}}function L(t,e){return _(0,0,0,t,e)}function m(t,e){return _(255,255,255,t,e)}function _(t,e,i,n,o){return"rgba("+t+","+e+","+i+","+(n=u(l(n)))+") "+u(100*o)+"%"}function C(t,e){return"string"==typeof t&&(t=(e||document).querySelector(t)),t}function x(t,e){t.classList.remove(e)}function T(t,e){t.classList.add(e)}function E(t,e,i){e=e||h;var n=document.createElementNS("http://www.w3.org/2000/svg",t);for(var o in e.appendChild(n),i)i.hasOwnProperty(o)&&k(n,o,i[o]);return n}function k(t,e,i){t.setAttributeNS(null,e,i)}function R(t,e){this.setOptions(e),this.el=C(t,h),this.constraints=[],this.events=[],this.setupLayers(),this.setupDimensions(),this.setCorner(this.getOption("corner")),this.setMode(this.getOption("mode")),this.init()}function A(t,e){this.el=t,this.shape=A.createClipPath(t,e||{type:"polygon"}),y(this.el,"translate(0px,0px)")}function D(t,e){this.center=t,this.radius=e}function B(){this.points=[]}function I(t,e,i,n){this.p1=t,this.c1=e,this.p2=n,this.c2=i}function F(t,e){this.p1=t,this.p2=e}function H(t,e){this.x=t,this.y=e}R.Corners={TOP_LEFT:0,TOP_RIGHT:1,BOTTOM_LEFT:2,BOTTOM_RIGHT:3},R.Defaults={topShadow:!0,topShadowBlur:5,topShadowAlpha:.5,topShadowOffsetX:0,topShadowOffsetY:1,topShadowCreatesShape:!0,backReflection:!1,backReflectionSize:.02,backReflectionOffset:0,backReflectionAlpha:.15,backReflectionDistribute:!0,backShadow:!0,backShadowSize:.04,backShadowOffset:0,backShadowAlpha:.1,backShadowDistribute:!0,bottomShadow:!0,bottomShadowSize:1.5,bottomShadowOffset:0,bottomShadowDarkAlpha:.7,bottomShadowLightAlpha:.1,bottomShadowDistribute:!0,setPeelOnInit:!0,clippingBoxScale:4,flipConstraintOffset:5,dragPreventsDefault:!0},R.prototype.setCorner=function(){var t=arguments;void 0===t[0]?t=[R.Corners.BOTTOM_RIGHT]:t[0].length&&(t=t[0]),this.corner=this.getPointOrCorner(t)},R.prototype.setMode=function(t){"book"===t?(this.addPeelConstraint(R.Corners.BOTTOM_LEFT),this.addPeelConstraint(R.Corners.TOP_LEFT),this.setOption("backReflection",!1),this.setOption("backShadowDistribute",!1),this.setOption("bottomShadowDistribute",!1)):"calendar"===t&&(this.addPeelConstraint(R.Corners.TOP_RIGHT),this.addPeelConstraint(R.Corners.TOP_LEFT))},R.prototype.setPeelPath=function(t,e){var i,n,o,r,s=arguments;i=new H(t,e),4===s.length?(n=new H(s[2],s[3]),this.path=new F(i,n)):8===s.length&&(o=new H(s[2],s[3]),r=new H(s[4],s[5]),n=new H(s[6],s[7]),this.path=new I(i,o,r,n))},R.prototype.handleDrag=function(t,e){this.dragHandler=t,this.setupDragEvents(e)},R.prototype.handlePress=function(t,e){this.pressHandler=t,this.setupDragEvents(e)},R.prototype.setupDragEvents=function(t){var e,i,n,o=this;function r(t,r){o.getOption("dragPreventsDefault")&&r.preventDefault(),i=t?"touchmove":"mousemove",n=t?"touchend":"mouseup",v(h,i,s),v(h,n,a),e=!1}function s(t){o.dragHandler&&p(o.dragHandler,t),e=!0}function a(t){!e&&o.pressHandler&&p(o.pressHandler,t),O(h,i,s),O(h,n,a)}function p(t,e){var i=P(e,o.el);t.call(o,e,i.x,i.y)}!this.dragEventsSetup&&(t=t||this.el,this.addEvent(t,"mousedown",r.bind(this,!1)),this.addEvent(t,"touchstart",r.bind(this,!0)),this.dragEventsSetup=!0)},R.prototype.removeEvents=function(){this.events.forEach(function(t,e){O(t.el,t.type,t.handler)}),this.events=[]},R.prototype.setTimeAlongPath=function(t){t=l(t);var e=this.path.getPointForTime(t);this.timeAlongPath=t,this.setPeelPosition(e.x,e.y)},R.prototype.setFadeThreshold=function(t){this.fadeThreshold=t},R.prototype.setPeelPosition=function(){var t=this.getPointOrCorner(arguments);(t=this.getConstrainedPeelPosition(t))&&(this.peelLineSegment=this.getPeelLineSegment(t),this.peelLineRotation=this.peelLineSegment.getAngle(),this.setClipping(),this.setBackTransform(t),this.setEffects())},R.prototype.addPeelConstraint=function(){var t=this.getPointOrCorner(arguments),e=this.corner.subtract(t).getLength();this.constraints.push(new D(t,e)),this.calculateFlipConstraint()},R.prototype.setOption=function(t,e){this.options[t]=e},R.prototype.getOption=function(t){var e;return this.options[(e=t).replace(/-(\w)/g,function(t,e){return e.toUpperCase()})]},R.prototype.getAmountClipped=function(){var t,e,i=this.getTopClipArea(),n=this.width*this.height;return t=i,(t-(e=n))/(0-e)},R.prototype.addEvent=function(t,e,i){return v(t,e,i),this.events.push({el:t,type:e,handler:i}),i},R.prototype.getTopClipArea=function(){var t=new B;return this.elementBox.forEach(function(e){this.distributeLineByPeelLine(e,t)},this),B.getArea(t.getPoints())},R.prototype.calculateFlipConstraint=function(){var t=this.corner,e=this.constraints.concat();this.flipConstraint=e.sort(function(e,i){return t.y,e.center.y,t.y,i.center.y,e-i})[0]},R.prototype.dragStart=function(t,e,i){},R.prototype.fireHandler=function(t,e){var i=P(t,this.el);e.call(this,t,i.x,i.y)},R.prototype.setClipping=function(){var t=new B,e=new B;this.clippingBox.forEach(function(i){this.distributeLineByPeelLine(i,t,e)},this),this.topClip.setPoints(t.getPoints()),this.backClip.setPoints(e.getPoints())},R.prototype.distributeLineByPeelLine=function(t,e,i){var n=this.peelLineSegment.getIntersectPoint(t);this.distributePointByPeelLine(t.p1,e,i),this.distributePointByPeelLine(n,e,i)},R.prototype.distributePointByPeelLine=function(t,e,i){if(t){var n=this.peelLineSegment.getPointDeterminant(t);n<=0&&e.addPoint(t),n>=0&&i&&i.addPoint(this.flipPointHorizontally(t))}},R.prototype.setOptions=function(t){var e=t||{},i=R.Defaults;for(var n in i)i.hasOwnProperty(n)&&!(n in e)&&(e[n]=i[n]);this.options=e},R.prototype.findOrCreateLayer=function(t,e,i){var n,o,r,s,a,h=g(t),p=C(this.getOption(t+"-element")||"."+h,e);return!p&&(p=(n=e,o=h,T(r=document.createElement("div"),o),n.appendChild(r),r)),T(p,g("layer")),s=p,a=i,s.style.zIndex=a,p},R.prototype.getPointOrCorner=function(t){return 2===t.length?new H(t[0],t[1]):"number"==typeof t[0]?this.getCornerPoint(t[0]):t[0]},R.prototype.getCornerPoint=function(t){var e=+!!(1&t)*this.width,i=+!!(2&t)*this.height;return new H(e,i)},R.prototype.getOptionalShape=function(){var t;return["rect","polygon","path","circle"].some(function(e){var i,n=this.getOption(e);return n&&((i={}).attributes=n,i.type=e,t=i),t},this),t},R.prototype.setupLayers=function(){var t=this.getOptionalShape(),e=this.topLayer=this.findOrCreateLayer("top",this.el,2),i=this.backLayer=this.findOrCreateLayer("back",this.el,3);this.bottomLayer=this.findOrCreateLayer("bottom",this.el,1),t?(this.topLayer=this.wrapShapeLayer(this.topLayer,"top-outer-clip"),this.backLayer=this.wrapShapeLayer(this.backLayer,"back-outer-clip"),this.topShapeClip=new A(e,t),this.backShapeClip=new A(i,t),this.bottomShapeClip=new A(this.bottomLayer,t),this.getOption("topShadowCreatesShape")&&(this.topShadowElement=this.setupDropShadow(t,e))):this.topShadowElement=this.findOrCreateLayer("top-shadow",e,1),this.topClip=new A(this.topLayer),this.backClip=new A(this.backLayer),this.backShadowElement=this.findOrCreateLayer("back-shadow",i,1),this.backReflectionElement=this.findOrCreateLayer("back-reflection",i,2),this.bottomShadowElement=this.findOrCreateLayer("bottom-shadow",this.bottomLayer,1),this.usesBoxShadow=!t},R.prototype.setupDropShadow=function(t,e){var i=E("svg",e,{class:g("layer")});return E(t.type,i,t.attributes),i},R.prototype.wrapShapeLayer=function(t,e){var i,n=(i=t).style.zIndex;T(t,g("shape-layer"));var o=this.findOrCreateLayer(e,this.el,n);return o.appendChild(t),o},R.prototype.setupDimensions=function(){this.width=this.el.offsetWidth,this.height=this.el.offsetHeight,this.center=new H(this.width/2,this.height/2),this.elementBox=this.getScaledBox(1),this.clippingBox=this.getScaledBox(this.getOption("clippingBoxScale"))},R.prototype.getScaledBox=function(t){var e=t,i=t-1,n=new H(-this.width*i,-this.height*i),o=new H(this.width*e,-this.height*i),r=new H(this.width*e,this.height*e),s=new H(-this.width*i,this.height*e);return[new F(n,o),new F(o,r),new F(r,s),new F(s,n)]},R.prototype.getConstrainedPeelPosition=function(t){return this.constraints.forEach(function(e){var i=this.getFlipConstraintOffset(e,t);i&&(e=new D(e.center,e.radius-i)),t=e.constrainPoint(t)},this),t},R.prototype.getFlipConstraintOffset=function(t,e){var i=this.getOption("flipConstraintOffset");if(t===this.flipConstraint&&i){var n,o=this.corner.subtract(this.center),r=this.corner.subtract(t.center),s=r.getAngle();r.rotate(-s);var a=e.subtract(t.center).rotate(-s);if(o.x*o.y<0&&(a.y*=-1),a.x>0&&a.y>0){return-(((n=a.getAngle())-45)/45)*i}}},R.prototype.getPeelLineSegment=function(t){var e=this.corner.subtract(t).scale(.5),i=t.add(e);0===e.x&&0===e.y&&(e=t.subtract(this.center));var n=e.getLength(),o=Math.max(this.width,this.height)/n*10,r=e.rotate(-90).scale(o),s=i.add(r),a=i.subtract(r);return new F(s,a)},R.prototype.setBackTransform=function(t){var e=this.flipPointHorizontally(this.corner),i=(this.peelLineRotation-90)*2,n=t.subtract(e.rotate(i)),o="translate("+u(n.x)+"px, "+u(n.y)+"px) rotate("+u(i)+"deg)";y(this.backLayer,o),y(this.topShadowElement,o)},R.prototype.getPeelLineDistance=function(){this.peelLineRotation<90?(t=R.Corners.TOP_RIGHT,e=R.Corners.BOTTOM_LEFT):this.peelLineRotation<180?(t=R.Corners.BOTTOM_RIGHT,e=R.Corners.TOP_LEFT):this.peelLineRotation<270?(t=R.Corners.BOTTOM_LEFT,e=R.Corners.TOP_RIGHT):this.peelLineRotation<360&&(t=R.Corners.TOP_LEFT,e=R.Corners.BOTTOM_RIGHT),i=this.getCornerPoint(t),n=this.getCornerPoint(e);var t,e,i,n,o=new F(i,n).scale(2),r=this.peelLineSegment.getIntersectPoint(o);if(!r)return 2;var s=i.subtract(r).getLength(),a=i.subtract(n).getLength();return s/a},R.prototype.setEffects=function(){var t=this.getPeelLineDistance();this.setTopShadow(t),this.setBackShadow(t),this.setBackReflection(t),this.setBottomShadow(t),this.setFade()},R.prototype.setTopShadow=function(t){if(this.getOption("topShadow")){var e,i,n,s,a,h,p,c,u,l,f=this.getOption("topShadowBlur"),d=this.getOption("topShadowOffsetX"),g=this.getOption("topShadowOffsetY"),y=this.getOption("topShadowAlpha"),b=this.exponential(t,5,y);if(this.usesBoxShadow){e=this.topShadowElement,i=d,n=g,s=f,a=b,e.style[o]=w(i,n,s,0,a)}else h=this.topShadowElement,p=d,c=g,u=f,l=b,h.style[r]="drop-shadow("+w(p,c,u,null,l)+")"}},R.prototype.distributeOrLinear=function(t,e,i){var n,o;return e?(n=t,2*((o=i)||1)*(.5-Math.abs(n-.5))):t*i},R.prototype.exponential=function(t,e,i){return i*l(Math.pow(1+t,e)-1)},R.prototype.setBackReflection=function(t){var e=[];if(this.canSetLinearEffect("backReflection",t)){var i=this.getOption("backReflectionDistribute"),n=this.getOption("backReflectionSize"),o=this.getOption("backReflectionOffset"),r=this.getOption("backReflectionAlpha"),s=this.distributeOrLinear(t,i,n),a=t-o,h=a-s;e.push(m(0,0)),e.push(m(0,h-s)),e.push(m(r,h)),e.push(m(0,a))}S(this.backReflectionElement,180-this.peelLineRotation,e)},R.prototype.setBackShadow=function(t){var e=[];if(this.canSetLinearEffect("backShadow",t)){var i=this.getOption("backShadowSize"),n=this.getOption("backShadowOffset"),o=this.getOption("backShadowAlpha"),r=this.getOption("backShadowDistribute"),s=this.distributeOrLinear(t,r,i),a=t-n,h=a-s;e.push(L(0,0)),e.push(L(0,h-s)),e.push(L(o,h)),e.push(L(o,a))}S(this.backShadowElement,180-this.peelLineRotation,e)},R.prototype.setBottomShadow=function(t){var e=[];if(this.canSetLinearEffect("bottomShadow",t)){var i=this.getOption("bottomShadowSize"),n=this.getOption("bottomShadowOffset"),o=this.getOption("bottomShadowDarkAlpha"),r=this.getOption("bottomShadowLightAlpha"),s=this.getOption("bottomShadowDistribute"),a=t-(.025-n),h=a-this.distributeOrLinear(t,s,.03)*i-n;e=[L(0,0),L(0,h-(.02*i-n)),L(r,h),L(r,a),L(o,t)]}S(this.bottomShadowElement,this.peelLineRotation+180,e)},R.prototype.canSetLinearEffect=function(t,e){return this.getOption(t)&&e>0},R.prototype.setFade=function(){var t,e=this.fadeThreshold,i=1;e&&((t=void 0!==this.timeAlongPath?this.timeAlongPath:this.getAmountClipped())>e&&(i=(1-t)/(1-e)),b(this.topLayer,i),b(this.backLayer,i),b(this.bottomShadowElement,i))},R.prototype.flipPointHorizontally=function(t){return new H(t.x-(t.x-this.center.x)*2,t.y)},R.prototype.init=function(){this.getOption("setPeelOnInit")&&this.setPeelPosition(this.corner),T(this.el,g("ready"))},A.getDefs=function(){return this.defs||(this.svg=E("svg",null,{class:g("svg-clip-element")}),this.defs=E("defs",this.svg)),this.defs},A.createClipPath=function(t,e){var n,o,r=A.getId(),s=E("clipPath",this.getDefs()),a=E(e.type,s,e.attributes);return k(s,"id",r),n=t,o="url(#"+r+")",n.style[i]=o,a},A.getId=function(){return A.id||(A.id=1),"svg-clip-"+A.id++},A.prototype.setPoints=function(t){var e=t.map(function(t){return u(t.x)+","+u(t.y)}).join(" ");k(this.shape,"points",e)},D.prototype.containsPoint=function(t){if(this.boundingRectContainsPoint(t)){var e=this.center.x-t.x,i=this.center.y-t.y;e*=e,i*=i;var n=e+i,o=this.radius*this.radius;return n<=o}return!1},D.prototype.boundingRectContainsPoint=function(t){return t.x>=this.center.x-this.radius&&t.x<=this.center.x+this.radius&&t.y>=this.center.y-this.radius&&t.y<=this.center.y+this.radius},D.prototype.constrainPoint=function(t){if(!this.containsPoint(t)){var e=t.subtract(this.center).getAngle();t=this.center.add(new H(this.radius,0).rotate(e))}return t},B.getArea=function(t){var e=0,i=0;return t.forEach(function(t,n,o){var r=o[(n+1)%o.length];e+=t.x*r.y,i+=t.y*r.x}),(e-i)/2},B.prototype.addPoint=function(t){this.points.push(t)},B.prototype.getPoints=function(){return this.points},I.prototype.getPointForTime=function(t){var e=Math.pow(1-t,3),i=3*t*Math.pow(1-t,2),n=3*Math.pow(t,2)*(1-t),o=Math.pow(t,3),r=e*this.p1.x+i*this.c1.x+n*this.c2.x+o*this.p2.x,s=e*this.p1.y+i*this.c1.y+n*this.c2.y+o*this.p2.y;return new H(r,s)},F.EPSILON=1e-6,F.prototype.getPointForTime=function(t){return this.p1.add(this.getVector().scale(t))},F.prototype.scale=function(t){var e=this.p1.add(this.p2.subtract(this.p1).scale(t)),i=this.p2.add(this.p1.subtract(this.p2).scale(t));return new F(e,i)},F.prototype.getPointDeterminant=function(t){var e=(t.x-this.p1.x)*(this.p2.y-this.p1.y)-(t.y-this.p1.y)*(this.p2.x-this.p1.x);return e>-F.EPSILON&&e<F.EPSILON&&(e=0),e},F.prototype.getIntersectPoint=function(t){function e(t,e){return t.x*e.y-t.y*e.x}var i=this.p2.subtract(this.p1),n=t.p2.subtract(t.p1),o=e(t.p1.subtract(this.p1),i),r=e(i,n);if(0==r)return null;var s=o/r,a=e(t.p1.subtract(this.p1),n)/r;return a>=0&&a<=1&&s>=0&&s<=1?this.p1.add(i.scale(a)):null},F.prototype.getAngle=function(){return this.getVector().getAngle()},F.prototype.getVector=function(){return this.vector||(this.vector=this.p2.subtract(this.p1)),this.vector},H.DEGREES_IN_RADIANS=180/Math.PI,H.degToRad=function(t){return t/H.DEGREES_IN_RADIANS},H.radToDeg=function(t){for(var e=t*H.DEGREES_IN_RADIANS;e<0;)e+=360;return e},H.vector=function(t,e){var i=H.degToRad(t);return new H(Math.cos(i)*e,Math.sin(i)*e)},H.prototype.add=function(t){return new H(this.x+t.x,this.y+t.y)},H.prototype.subtract=function(t){return new H(this.x-t.x,this.y-t.y)},H.prototype.scale=function(t){return new H(this.x*t,this.y*t)},H.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},H.prototype.getAngle=function(){return H.radToDeg(Math.atan2(this.y,this.x))},H.prototype.setAngle=function(t){return H.vector(t,this.getLength())},H.prototype.rotate=function(t){return this.setAngle(this.getAngle()+t)},i=c("clipPath"),n=c("transform"),o=c("boxShadow"),r=c("filter"),(e=document.createElement("div").style).cssText="background:linear-gradient(45deg,#9f9,white);",s=(e.backgroundImage||"").indexOf("gradient")>-1,R.supported=!!(i&&n),R.effectsSupported=s,t.Peel=R}(window);