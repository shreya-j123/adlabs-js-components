const VservAdlabsEvents={INITIALIZED:"bridgeInitialized",AD_PARAMS_SET:"adParamsSet",CLICK:"click",PAUSE:"pause",RESUME:"resume",CLOSE:"close",RENDER:"render",ERROR:"error",CLOSEABLE:"closeable",INTERACTION_START:"interactionStarted",INTERACTION_END:"interactionEnded"};"undefined"!=typeof window&&(window.VservAdlabsEvents=VservAdlabsEvents);const eventsMap=new Map,VservAdlabs=function(){let e={},r={};return{init:function(){return"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("message",function(e){if(e.source!==window.parent||!e.data?.event)return;let{event:r,data:t}=e.data;r===VservAdlabsEvents.AD_PARAMS_SET?VservAdlabs.setAdParams(t):VservAdlabs.notifyAd(r,t)},!1),console.log("VservAdlabs: Initialized"),VservAdlabs.notifyRenderer(VservAdlabsEvents.INITIALIZED),!0},notifyAd:function(r,t={}){console.log(">>> notify Ad",r,t),e[r]&&e[r].forEach(e=>{try{e(t||{})}catch(s){console.error(`VservAdlabs: Listener error for ${r}`,s)}});try{let s=new CustomEvent("app:"+r,{detail:t||{},bubbles:!0,cancelable:!0});document.dispatchEvent(s)}catch(n){console.error("VservAdlabs: Custom event dispatch error",n)}return!0},addEventListener:function(r,t){return e[r]&&e[r].forEach(e=>{try{e()}catch(t){console.warn(`VservAdlabs: Listener error for ${r}`,t)}}),e[r]||(e[r]=[]),e[r].push(t),function(){VservAdlabs.removeEventListener(r,t)}},removeEventListener:function(r,t){e[r]&&(t?e[r]=e[r].filter(e=>e!==t):delete e[r])},notifyRenderer(e,r={}){if(!e)return;let t={event:e,data:r||{},timestamp:Date.now()},s=JSON.stringify(t),n=[{condition:()=>!!window.ReactNativeWebView?.postMessage,action:()=>window.ReactNativeWebView.postMessage(s)},{condition:()=>!!window.webkit?.messageHandlers?.vservAdlabsBridge?.postMessage,action:()=>window.webkit.messageHandlers.vservAdlabsBridge.postMessage(t)},{condition:()=>!!window?.vservAdlabsBridge?.notifyRenderer,action:()=>window.vservAdlabsBridge.notifyRenderer(s)},{condition:()=>window.parent!==window&&!!window.parent?.postMessage,action:()=>window.parent.postMessage(t,"*")},];for(let{condition:a,action:d}of n)if(a()){d();return}console.log("[vservAdlabsBridge -> App]",t)},setAdParams:function(e){try{let t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch(s){return console.error("VservAdlabs: Invalid JSON for key:"),!1}return r=t,this.notifyAd(VservAdlabsEvents.AD_PARAMS_SET,r),!0}catch(n){return console.error("VservAdlabs: setJsonData error",n),!1}},getAdParams:function(e){return e?r[e]||null:r}}}();VservAdlabs.init(),"undefined"!=typeof module&&module.exports&&(module.exports=VservAdlabs,module.exports.VservAdlabsEvents=VservAdlabsEvents),"undefined"!=typeof exports&&(exports.default=VservAdlabs,exports.VservAdlabsEvents=VservAdlabsEvents);